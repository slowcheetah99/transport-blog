<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/javascript/formProcessor.js" async></script>
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="/css/tailwind.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://kit.fontawesome.com/cc289a2103.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>

    <title>CBD TRANSPORT | WELCOME</title>
</head>
<body class="bg-gray-100">

    <h1 class="text-4xl">Report Preview</h1>
    <div class="pdf-capture">
        <% Object.values(user).forEach(el=>{ %>
        <div class="py-24">
            <div class="px-10 flex justify-between items-center">
                <div class="brand w-1/4 flex justify-between items-center">
                    <img class=" w-32 h-32 rounded-full" src="/images/LOGO.png" alt='logo'/>
                    <h3 class="text-4xl font-semibold">CDB Transport</h3>
                </div>
                    <div>
                        <h2 class="text-6xl"><%=el.name%></h2>
                    </div>
            </div>
            <div class="brand-info pl-52">
                <h4 class="text-2xl font-medium">Phone Number: <%=el.contactDigits %></h4>
                <h4 class="text-2xl font-medium">Email: <%=el.email%></h4>
            </div>
        </div>

        <hr class="bg-gray-50 w-3/4 h-2 m-auto drop-shadow-2xl" />
        <% }) %>
        
        <h1 class="text-6xl text-center mt-8 mb-16 font-extrabold">Report</h1>

        <div class="flex justify-around items-center mb-16">

            <div class="bg-white w-1/3 h-64 pt-4 rounded-lg flex justify-center items-center">
                <h1 class="text-5xl font-bold mr-4">Posts: </h1>
                <h3 class="text-4xl pl-8 "><%=blogNum %></h3>
            </div>

            <div class="bg-white w-1/3 h-96 pt-24 rounded-lg">
                <h1 class="text-3xl font-bold pl-10 mb-4">SACCO Information</h1>
                <div class="flex justify-between px-10">
                    <div>
                        <h3 class="text-lg mb-2">Name: </h3>
                        <h3 class="text-lg mb-2">Email: </h3>
                        <h3 class="text-lg mb-2">Contact Person: </h3>
                        <h3 class="text-lg mb-2">Contact Digits: </h3>
                    </div>
                    <div>
                        <% Object.values(user).forEach(el=>{ %>
                        <h3 class="text-lg mb-2"><%=el.name %></h3>
                        <h3 class="text-lg mb-2"><%=el.email %></h3>
                        <h3 class="text-lg mb-2"><%=el.contactPerson %></h3>
                        <h3 class="text-lg mb-2"><%=el.contactDigits %></h3>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>
        <%- include('../partials/footer') %>
    </div>
    <button id="report-gen" class="px-6 py-2 bg-purple-500 text-xl font-semibold mt-8 text-white rounded-lg hover:shadow-xl">Generate Report</button>
    
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js" integrity="sha512-gtcrasYnyeB27+IejClswFlb/eggt+khRr+lLAeNcgg5x2ijlWaiBOPXZkwivNj15LaE6s9CzV57hsoTPrQ5xg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js" integrity="sha512-tVYBzEItJit9HXaWTPo8vveXlkK62LbA+wez9IgzjTmFNLMBO1BEYladBw2wnM3YURZSMUyhayPCoLtjGh84NQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>


    
    <!-- <script type="text/javascript">
        const pdfCapture=document.querySelector('.pdf-capture');
        const pdfBtn = document.querySelector('#report-gen');
        const pdfPrint=()=>{
            window.html2canvas = html2canvas;
            window.jsPDF = window.jspdf.jsPDF;
            const pdfBtn = document.querySelector(".admin__report");
            
                    html2canvas(pdfCapture, {
                        allowTaint: true,
                        useCORS: true,
                        scale: 1,
                    }).then((canvas) => {
                        // document.body.appendChild(canvas); //to avoid preview of document
                        var img = canvas.toDataURL("image/png");
                        var doc = new jsPDF({
                            orientation: "landscape",
                        });
                        doc.getFontSize(12);
                        const imgProps = doc.getImageProperties(img);
                        var width = doc.internal.pageSize.getWidth();
                        var height = doc.internal.pageSize.getHeight();
                        const pdfHeight = (imgProps.height * width) / imgProps.width;
                        doc.addImage(img, "PNG", 0, 0, width, height);
                        doc.save("report.pdf");

                    });
        }


    pdfPrint();
    </script> -->

</body>
</html>